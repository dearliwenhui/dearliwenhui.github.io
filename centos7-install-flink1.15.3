#!/bin/sh

# change yum repo to 163
curl -o /etc/yum.repos.d/CentOS-Base.repo http://mirrors.163.com/.help/CentOS7-Base-163.repo

yum clean all

yum makecache

yum install vim -y

# install java 11
yum install -y java-11-openjdk

# 下载flink
#https://mirrors.aliyun.com/apache/flink/
#https://mirrors.tuna.tsinghua.edu.cn/apache/flink/
#http://mirrors.cloud.tencent.com/apache/flink/      http://mirrors.cloud.tencent.com/apache/flink/flink-1.15.3/flink-1.15.3-bin-scala_2.12.tgz
#curl -O https://archive.apache.org/dist/flink/flink-1.15.3/flink-1.15.3-bin-scala_2.12.tgz
curl -L -C - "https://d.pcs.baidu.com/file/663398f56h361a1fac98a2eac29b1d5e?fid=1773990534-250528-440062754936509&rt=pr&sign=FDtAER-DCb740ccc5511e5e8fedcff06b081203-83w4K6uFsnL0t9iYdugvdeIouds%3D&expires=8h&chkbd=0&chkv=0&dp-logid=476763545118619144&dp-callid=0&dstime=1671520133&r=686498326&origin_appid=&file_type=0" -o "flink-1.15.3-bin-scala_2.12.tgz" -A "pan.baidu.com" -b "BDUSS=zU2QllZTEJJMDNFLTBWTmJNYUVGdGZZd1RwMVZ4cHgwLW5sYzdaVDBaVzQ1Y2hqRVFBQUFBJCQAAAAAAAAAAAEAAAC8aVm4X3Nub3c5NQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAALhYoWO4WKFjM"

tar zxvf flink-1.15.3-bin-scala_2.12.tgz

curl -o flink-1.15.3/conf/flink-conf.yaml https://dearliwenhui.github.io/flink-1.15.3-conf.yaml

./flink-1.15.3/bin/start-cluster.sh


