<html><head><meta charset="utf-8"><title>15 群组的管理和文件权限管理-慕课专栏</title>
			<meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
			<meta name="renderer" content="webkit">
			<meta property="qc:admins" content="77103107776157736375">
			<meta property="wb:webmaster" content="c4f857219bfae3cb">
			<meta http-equiv="Access-Control-Allow-Origin" content="*">
			<meta http-equiv="Cache-Control" content="no-transform ">
			<meta http-equiv="Cache-Control" content="no-siteapp">
			<link rel="apple-touch-icon" sizes="76x76" href="https://www.imooc.com/static/img/common/touch-icon-ipad.png">
			<link rel="apple-touch-icon" sizes="120x120" href="https://www.imooc.com/static/img/common/touch-icon-iphone-retina.png">
			<link rel="apple-touch-icon" sizes="152x152" href="https://www.imooc.com/static/img/common/touch-icon-ipad-retina.png">
			<link href="https://moco.imooc.com/captcha/style/captcha.min.css" rel="stylesheet">
			<link rel="stylesheet" href="https://www.imooc.com/static/moco/v1.0/dist/css/moco.min.css?t=201907021539" type="text/css">
			<link rel="stylesheet" href="https://www.imooc.com/static/lib/swiper/swiper-3.4.2.min.css?t=201907021539">
			<link rel="stylesheet" href="../zhuanlanChapter-less.css?v=201907051055" type="text/css">
			<link charset="utf-8" rel="stylesheet" href="https://www.imooc.com/static/lib/ueditor/themes/imooc/css/ueditor.css?v=201907021539"><link rel="stylesheet" href="https://www.imooc.com/static/lib/baiduShare/api/css/share_style0_16.css?v=6aba13f0.css"></head>
			<body><div id="main">

<div class="container clearfix" id="top" style="display: block; width: 1134px;">
    
    <div class="center_con js-center_con l" style="width: 1134px;">
        <div class="article-con">
                            <!-- 买过的阅读 -->
                <div class="map">
                    <a href="/read" target="_blank"><i class="imv2-feather-o"></i></a>
                    <a href="/read/39" target="_blank">Linux命令行与Shell脚本编程大全</a>
                    <a href="" target="_blank">
                        <span>
                            / 2-9 15 群组的管理和文件权限管理
                        </span>
                    </a>
                </div>

            


            <div class="art-title" style="margin-top: 0px;">
                15 群组的管理和文件权限管理
            </div>
            <div class="art-info">
                
                <span>
                    更新时间：2019-06-28 11:46:49
                </span>
            </div>
            <div class="art-top">
                                <img src="https://img.mukewang.com/5d158d9a00012fbb06400359.jpg" alt="">
                                                <div class="famous-word-box">
                    <img src="https://www.imooc.com/static/img/column/bg-l.png" alt="" class="bg1 bg">
                    <img src="https://www.imooc.com/static/img/column/bg-r.png" alt="" class="bg2 bg">
                    <div class="famous-word">今天应做的事没有做，明天再早也是耽误了。<p class="author">——裴斯泰洛齐</p></div>
                </div>
                            </div>
            <div class="art-content js-lookimg">
                <div><div class="cl-preview-section"><h2 id="内容简介" style="font-size: 30px;">内容简介</h2>
</div><div class="cl-preview-section"><ol>
<li style="font-size: 20px; line-height: 38px;">前言</li>
<li style="font-size: 20px; line-height: 38px;">群组管理的命令</li>
<li style="font-size: 20px; line-height: 38px;">修改文件的所有者和群组</li>
<li style="font-size: 20px; line-height: 38px;">chmod 命令：修改访问权限</li>
<li style="font-size: 20px; line-height: 38px;">总结</li>
</ol>
</div><div class="cl-preview-section"><h2 id="前言" style="font-size: 30px;">1. 前言</h2>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">上一课用户和权限，有权就任性。用户管理中，我们开启了用户与权限的新篇章，学了不少用户管理的基础知识。</p>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">这一课我们接着来学习群组管理和文件的权限管理。配合表格和原理图，相信这一课有点复杂的知识也不在话下。</p>
</div><div class="cl-preview-section"><h2 id="群组管理的命令" style="font-size: 30px;">2. 群组管理的命令</h2>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">上一课我们说过，Linux 中每一个用户都属于一个特定的群组。</p>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">那你要问了：“那么我们刚才创建的 thomas 是属于哪个群组呢？我们以前创建的个人用户 oscar 又属于哪个群组呢？我们之前都没配置呀。”</p>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">事实上，如果你不设置用户的群组，那么默认会创建一个和它的用户名一样的群组，并且把用户划归到这个群组。</p>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">因为上一课我们删除了 thomas 这个用户，连他的家目录也删了。所以我们再用 <code>adduser thomas</code> 命令把 thomas 用户加回来。</p>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">我们可以用 ls -l 命令来看一下 /home 目录下的内容：</p>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;"><img src="http://img.mukewang.com/5d107bfc0001016f13840402.png" alt="图片描述" data-original="http://img.mukewang.com/5d107bfc0001016f13840402.png" class="" style="cursor: pointer;"></p>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">可以看到，我们的 oscar 用户和 thomas 用户的家目录分别是 /home/oscar 和 /home/thomas。</p>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">每一行的各列都有不同意义，我们之前的课程里有讲解过。</p>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">所以，第三列表示文件或目录的所有者，第四列表示文件或目录的所在群组。</p>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">可以看到：oscar 这个目录的所有者是 oscar，群组是 oscar；thomas 这个目录的所有者是 thomas，群组是 thomas。</p>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">但是，把用户分在不同的群组，到底有何意义呢？</p>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">在用户不多的时候，我们会觉得一个用户属于一个群组（比如默认是与用户名相同的群组名）是挺不错的。但是一旦用户一多，你可能就想要创建群组了。</p>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">我们来学习如何管理群组。当然，群组还有权限的考量因素，我们这课之后会讲权限。</p>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">当然了，群组管理的命令也需要 root 身份。</p>
</div><div class="cl-preview-section"><h4 id="addgroup：创建群组" style="font-size: 26px;">addgroup：创建群组</h4>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">addgroup 是 add 和 group 的缩写，add 是英语“添加”的意思，group 是英语“群组”的意思。所以 addgroup 命令用于添加一个新的群组。</p>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">用法也很简单，和 adduser 命令类似，后接需要创建的群组名。例如：</p>
</div><div class="cl-preview-section"><pre><code>addgroup friends
</code></pre>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">以上命令用于创建一个名为 friends 的群组。friends 是英语“朋友”的意思，也是美剧《老友记》的名字。</p>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;"><img src="http://img.mukewang.com/5d107c090001ba1e11040350.png" alt="图片描述" data-original="http://img.mukewang.com/5d107c090001ba1e11040350.png" class="" style="cursor: pointer;"></p>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">在上图中，我们看到用 addgroup 命令创建了一个新的群组，名叫 friends，而且成功了。Done 是英语“完成”的意思。</p>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">很不错，不过目前 friends 这个群组还是空的，因为还没有往里面添加用户呢。</p>
</div><div class="cl-preview-section"><h4 id="usermod-命令：修改用户账户" style="font-size: 26px;">usermod 命令：修改用户账户</h4>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">usermod 是 user 和 modify 的缩写，user 是英语“用户”的意思，modify 是“修改”的意思。usermod 命令用于修改用户的账户。</p>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">usermod 命令有好多参数，可以实现不同的功能。不过我们暂时只需要记得它的两个参数：</p>
</div><div class="cl-preview-section"><ul>
<li style="font-size: 20px; line-height: 38px;">-l：对用户重命名，但是 /home 目录中的用户家目录名不会改变，需要手动修改；</li>
<li style="font-size: 20px; line-height: 38px;">-g：修改用户所在群组。此用户的家目录里的所有文件的所在群组会相应改变。</li>
</ul>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">用法很简单，假如我要将 thomas 这个用户放到我刚创建的 friends 这个群组里，可以这样写：</p>
</div><div class="cl-preview-section"><pre><code>usermod -g friends thomas
</code></pre>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">我们知道，用户 thomas 之前的群组是 thomas，默认的。运行完 usermod -g friends thomas 之后，thomas 的群组就会变成 friends 了， /home/thomas 这个目录的群组也从 thomas 变成 friends。</p>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">我们怎么知道用户 thomas 的群组已经改变为 friends 了呢？</p>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">我们可以用 groups 命令，这个命令可以获知一个用户属于哪个（些）群组。</p>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">用法很简单，后接用户名就可以了，当然用户要存在才行：</p>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;"><img src="http://img.mukewang.com/5d107c140001646515820866.png" alt="图片描述" data-original="http://img.mukewang.com/5d107c140001646515820866.png" class="" style="cursor: pointer;"></p>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">可以看到：</p>
</div><div class="cl-preview-section"><ul>
<li style="font-size: 20px; line-height: 38px;">thomas 的群组从 thomas 变成了 friends，/home/thomas 这个目录的群组也从 thomas 变成 friends；</li>
<li style="font-size: 20px; line-height: 38px;">root 的群组就是 root；</li>
<li style="font-size: 20px; line-height: 38px;">oscar 的群组有好几个，说明我加入了很多“组织”，其中一个群组是 oscar。</li>
</ul>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">当然我们也可以一次性将一个用户添加到多个群组，就用 -G 参数（大写的 G）。</p>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">首先我们用 addgroup 命令来新建两个群组：happy 和 funny。happy 是英语“开心的”的意思，funny 是英语“有趣的”的意思：</p>
</div><div class="cl-preview-section"><pre><code>addgroup happy
</code></pre>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">然后：</p>
</div><div class="cl-preview-section"><pre><code>addgroup funny
</code></pre>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;"><img src="http://img.mukewang.com/5d107c1d00014b4c12580528.png" alt="图片描述" data-original="http://img.mukewang.com/5d107c1d00014b4c12580528.png" class="" style="cursor: pointer;"></p>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">接着，我们运行以下命令：</p>
</div><div class="cl-preview-section"><pre><code>usermod -G friends,happy,funny thomas
</code></pre>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">以上命令把 thomas 添加到 friends、happy 和 funny 三个群组。记得群组名之间要用逗号分隔，而且没有空格：</p>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;"><img src="http://img.mukewang.com/5d107c240001668e16440664.png" alt="图片描述" data-original="http://img.mukewang.com/5d107c240001668e16440664.png" class="" style="cursor: pointer;"></p>
</div><div class="cl-preview-section"><blockquote>
<p style="font-size: 20px; line-height: 38px;">注意：使用 usermod 时要小心，因为配合 -g 或 -G 参数时，它会把用户从原先的群组里剔除，加入到新的群组。如果你不想离开原先的群组，又想加入新的群组，可以在 -G 参数的基础上加上 -a 参数，a 是英语 append 的缩写，表示“追加”。例如：</p>
</blockquote>
</div><div class="cl-preview-section"><pre><code>addgroup good
</code></pre>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">然后：</p>
</div><div class="cl-preview-section"><pre><code>usermod -aG good thomas
</code></pre>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">以上命令就把 thomas 追加到群组 good 里了，这样 thomas 就属于四个群组：friends、happy、funny 和 good。good 是英语“好的”的意思。</p>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">可以用 groups 命令测试一下。</p>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">注意：groups 命令如果单独用，不加任何参数，会显示当前用户所在群组。</p>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;"><img src="http://img.mukewang.com/5d107c380001130b13080716.png" alt="图片描述" data-original="http://img.mukewang.com/5d107c380001130b13080716.png" class="" style="cursor: pointer;"></p>
</div><div class="cl-preview-section"><blockquote>
<p style="font-size: 20px; line-height: 38px;">记得，追加群组的时候，一定要用大写的 G 这个参数，不能用小写的 g 这个参数，即使只追加一个群组。</p>
</blockquote>
</div><div class="cl-preview-section"><h4 id="delgroup-命令：删除群组" style="font-size: 26px;">delgroup 命令：删除群组</h4>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">delgroup 是 delete 和 group 的缩写，delete 是英语“删除”的意思，group 是英语“群组”的意思。所以 delgroup 命令用于删除一个已存在的群组。</p>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">用法很简单，后接想要删除的群组名。例如：</p>
</div><div class="cl-preview-section"><pre><code>delgroup happy
</code></pre>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">就删除了 happy 这个群组。</p>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">再用 groups 命令测试，发现 thomas 只属于 friends、funny 和 good 这三个群组了。因为 happy 这个群组被删除了嘛。</p>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;"><img src="http://img.mukewang.com/5d1084da00015cd912680452.png" alt="图片描述" data-original="http://img.mukewang.com/5d1084da00015cd912680452.png" class="" style="cursor: pointer;"></p>
</div><div class="cl-preview-section"><blockquote>
<p style="font-size: 20px; line-height: 38px;">注意：addgroup 和 delgroup 命令只是 Debian 一族（包括 Ubuntu）才有的命令。对于其它的 Linux 发行版，一般来说，添加用户和删除用户是用 groupadd 和 groupdel 命令。</p>
</blockquote>
</div><div class="cl-preview-section"><h2 id="修改文件的所有者和群组" style="font-size: 30px;">3. 修改文件的所有者和群组</h2>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">只有 root 用户可以修改一个文件的所有者和群组。</p>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">比如说，我自己的用户 oscar 的家目录有一个文件，file.txt，是我刚创建的。</p>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">我们用 ls -l 命令来看一下它的信息：</p>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;"><img src="http://img.mukewang.com/5d1084e500014df212740350.png" alt="图片描述" data-original="http://img.mukewang.com/5d1084e500014df212740350.png" class="" style="cursor: pointer;"></p>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">可以看到，file.txt 的所有者和群组都是 oscar。</p>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">现在我决定，把这个文件转让给 thomas，也就是让 file.txt 的所有者变为 thomas，怎么做呢？</p>
</div><div class="cl-preview-section"><h4 id="chown-命令：改变文件的所有者" style="font-size: 26px;">chown 命令：改变文件的所有者</h4>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">此命令也需要 root 身份才能运行。</p>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">chown 是 change 和 owner 的缩写，change 是英语“改变”的意思，owner 是英语“所有者”的意思。因此 chown 命令用于改变文件的所有者。</p>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">用法也很简单，后接新的所有者的用户名，再接文件名。例如：</p>
</div><div class="cl-preview-section"><pre><code>chown thomas file.txt

</code></pre>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;"><img src="http://img.mukewang.com/5d1084f500013bf017040658.png" alt="图片描述" data-original="http://img.mukewang.com/5d1084f500013bf017040658.png" class="" style="cursor: pointer;"></p>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">可以看到，用 chown 命令，把 file.txt 文件的所有者改为 thomas 之后，file.txt 的所在群组是不变的，还是 oscar。</p>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">正所谓“身在曹营心在汉”。那么如何使它“身在曹营心也在曹营”呢？</p>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">就要用到 chgrp 命令了。</p>
</div><div class="cl-preview-section"><h4 id="chgrp-命令：改变文件的群组" style="font-size: 26px;">chgrp 命令：改变文件的群组</h4>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">chgrp 是 change 和 group 的缩写，change 是英语“改变”的意思，group 是英语“群组”的意思。chgrp 命令用于改变文件的群组。</p>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">用法也很简单，后接新的群组名，再接文件名。例如：</p>
</div><div class="cl-preview-section"><pre><code>chgrp thomas file.txt

</code></pre>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;"><img src="http://img.mukewang.com/5d10852d0001cf7613880450.png" alt="图片描述" data-original="http://img.mukewang.com/5d10852d0001cf7613880450.png" class="" style="cursor: pointer;"></p>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">好了，这下 file.txt 的所有者和群组都是 thomas 了。</p>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">其实，chown 命令也可以改变文件的群组，用法如下：</p>
</div><div class="cl-preview-section"><pre><code>chown thomas:friends file.txt

</code></pre>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">这句命令就把 file.txt 这个文件的所有者改为 thomas，群组改为 friends 了。用法也很简单，就是在所有者和群组之间用冒号隔开。</p>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;"><img src="http://img.mukewang.com/5d10853500012a7616120462.png" alt="图片描述" data-original="http://img.mukewang.com/5d10853500012a7616120462.png" class="" style="cursor: pointer;"></p>
</div><div class="cl-preview-section"><h4 id="r-参数：递归设置子目录和子文件" style="font-size: 26px;">-R 参数：递归设置子目录和子文件</h4>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">chown 命令的 -R 参数非常有用，还记得以前我们有些命令也会使用 -R 参数么？</p>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">是的，R 是 recursive 的缩写，表示“递归”。所以如果 chown 命令配上 -R 参数，就会使得被修改的目录的所有子目录和子文件都被改变所有者（或者连群组也改变，如果用上述冒号的方法来同时修改所有者和群组）。</p>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">例如，我突然变得“很坏”，想要把用户 thomas 的家目录的所有子目录和文件都占为己有。我可以这么做：</p>
</div><div class="cl-preview-section"><pre><code>chown -R oscar:oscar /home/thomas

</code></pre>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">这样不但使 /home/thomas 这个目录的所有者和群组都变成 oscar，而且其子目录和子文件也都是如此：</p>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;"><img src="http://img.mukewang.com/5d1085420001c8c714240668.png" alt="图片描述" data-original="http://img.mukewang.com/5d1085420001c8c714240668.png" class="" style="cursor: pointer;"></p>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">可以看到，/home/thomas 都归我（oscar）所有了。可怜的 thomas，正所谓“三十年河东，三十年河西。昔日权倾天下有，今朝都归我所有”。</p>
</div><div class="cl-preview-section"><h2 id="chmod-命令：修改访问权限" style="font-size: 30px;">4. chmod 命令：修改访问权限</h2>
</div><div class="cl-preview-section"><blockquote>
<p style="font-size: 20px; line-height: 38px;">好了，这一节我们要攻坚这一课最难的部分了：访问权限。</p>
</blockquote>
</div><div class="cl-preview-section"><h4 id="权限的原理" style="font-size: 26px;">权限的原理</h4>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">在 Linux 系统里，每个文件和目录都有一列权限属性。这一列访问权限指明了谁有读的权利，谁有修改的权利，谁有运行的权利。</p>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">我们其实早就见过访问权限了。是的，就在我们运行 ls -l 命令的时候，显示的每个文件或目录的第一列信息就是访问权限。</p>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">比如我们在当前用户的家目录下运行 ls -l 命令试试：</p>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;"><img src="http://img.mukewang.com/5d1085510001faeb15561018.png" alt="图片描述" data-original="http://img.mukewang.com/5d1085510001faeb15561018.png" class="" style="cursor: pointer;"></p>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">上图中文件信息的第一列比较复杂，我们可以看到不少 d、r、w、l、x 等字母。如果不细分的话，这些我们可以通称为文件访问权限符。</p>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">以下列出我们看到的字母的含义：</p>
</div><div class="cl-preview-section"><ul>
<li style="font-size: 20px; line-height: 38px;">d：英语 directory 的缩写，表示“目录”。就是说这是一个目录；</li>
<li style="font-size: 20px; line-height: 38px;">l：英语 link 的缩写，表示“链接”。就是说这是一个链接；</li>
<li style="font-size: 20px; line-height: 38px;">r：英语 read 的缩写，表示“读”。就是说可以读这个文件；</li>
<li style="font-size: 20px; line-height: 38px;">w：英语 write 的缩写，表示“写”。就是说可以写这个文件，也就是可以修改；</li>
<li style="font-size: 20px; line-height: 38px;">x：英语 execute 的缩写，表示“执行，运行”。就是说可以运行这个文件。</li>
</ul>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">如果 x 权限在一个目录上，那么表示的是这个目录可以被读，也就是可以打开此目录来看其子目录和子文件，如果它同时有 r 权限的话。</p>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">如果相应位置有字母，表示有相应权限；如果相应位置是一个短横 - ，则表示没有相应权限。</p>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">为什么我们看到这一排有好多个重复出现的 r、w 和 x 呢？</p>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">那是因为访问权限是按照用户来划分的：</p>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;"><img src="http://img.mukewang.com/5d10855a000107c312140416.png" alt="图片描述" data-original="http://img.mukewang.com/5d10855a000107c312140416.png" class="" style="cursor: pointer;"></p>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">如上图，除开第一个表示文件或目录属性的符号（此处是 d，表示目录；如果是 l，则是链接；还有其它字母，我们暂时不深究；如果是短横 - ，那么是普通文件。），其它的 9 个符号被划分为三组，从左到右分别表示：</p>
</div><div class="cl-preview-section"><ul>
<li style="font-size: 20px; line-height: 38px;">第一组 rwx 表示文件的所有者对于此文件的访问权限；</li>
<li style="font-size: 20px; line-height: 38px;">第二组 rwx 表示文件所属群组的其他用户对于此文件的访问权限；</li>
<li style="font-size: 20px; line-height: 38px;">第三组 rwx 表示除前两组之外的其他用户对于此文件的访问权限。</li>
</ul>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">我们用一个具体的文件来作为例子分析一下：</p>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;"><img src="http://img.mukewang.com/5d1085610001d2e313960302.png" alt="图片描述" data-original="http://img.mukewang.com/5d1085610001d2e313960302.png" class="" style="cursor: pointer;"></p>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">可以看到，renamed_file 这个文件的访问权限是：</p>
</div><div class="cl-preview-section"><pre><code>-rw-r--r--

</code></pre>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">我们从左到右来分析这些符号都表示什么：</p>
</div><div class="cl-preview-section"><ul>
<li style="font-size: 20px; line-height: 38px;">- 第一个短横表示这是一个普通文件。如果此处是 d，那么表示目录；如果是 l，那么表示链接等等；</li>
<li style="font-size: 20px; line-height: 38px;">rw- 表明文件的所有者（此处是 oscar）对文件有读、写的权限，但是没有运行的权限。也很好理解，因为这是一个普通文件，默认没有可执行的属性。记住：如果有 w 权限（写的权限），那么表明也有删除此文件的权限；</li>
<li style="font-size: 20px; line-height: 38px;">r-- 表明文件所在的群组（此处是 oscar）的其他用户（除了 oscar 之外）只可以读此文件，但不能写也不能执行，“可远观而不可亵玩焉”；</li>
<li style="font-size: 20px; line-height: 38px;">r-- 表示其他用户（除去 oscar 这个群组的用户）只可以读此文件，但不能写也不能执行。</li>
</ul>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">综上所述，renamed_file 这个文件是一个普通文件，不是一个目录，也不是链接文件，它的所有者 oscar 可以读写它，但不能执行；其他的用户只能读。</p>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">那么 root 呢？对于此文件 root 用户的访问权限是什么呢？</p>
</div><div class="cl-preview-section"><blockquote>
<p style="font-size: 20px; line-height: 38px;">记住：root 是超级管家，它有所有权限，“只有它想不到的，没有它做不到的”。它可以读、写、运行任意文件。</p>
</blockquote>
</div><div class="cl-preview-section"><h4 id="chmod-命令：修改文件的访问权限" style="font-size: 26px;">chmod 命令：修改文件的访问权限</h4>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">既然我们已经学会了如何查看和理解文件的访问权限，我们就来学习如何修改文件的访问权限吧。</p>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">我们要用到 chmod 命令，这个命令也是 Linux 中常用的命令。</p>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">毕竟“一朝权倾天下有”，“争权夺利”谁不喜欢啊。开个玩笑······</p>
</div><div class="cl-preview-section"><blockquote>
<p style="font-size: 20px; line-height: 38px;">开始讲解之前，要说明一点，chmod 命令不需要是 root 用户才能运行。只要你是此文件的所有者，你就可以用 chmod 来修改文件的访问权限。</p>
</blockquote>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">chmod 是 change 和 mode 的缩写，change 是英语“改变”的意思，mode 是“模式”的意思。chmod 命令用于修改文件的各种访问权限。</p>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">chmod 这个命令充满魅力，因为它的用法不止一种，好像百变星君，令人捉摸不透。</p>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">最常见的用法应该是数字式的。</p>
</div><div class="cl-preview-section"><h4 id="用数字来分配权限：chmod-的绝对用法" style="font-size: 26px;">用数字来分配权限：chmod 的绝对用法</h4>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">我们接下来要做一些加法，大家准备好了吗？不要让小学数学老师哭晕在体育办公室哦。什么？你的小学数学是地理老师教的，好，算你厉害······</p>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">不要怕，只是做一些极为简单的加法，我们只要心算就可以了。</p>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">事实上，Linux 系统为每种权限（r、w 和 x）分配了对应的数字：</p>
</div><div class="cl-preview-section"><div class="table-wrapper"><table>
<thead>
<tr>
<th align="center">权限</th>
<th align="center">数字</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">r</td>
<td align="center">4</td>
</tr>
<tr>
<td align="center">w</td>
<td align="center">2</td>
</tr>
<tr>
<td align="center">x</td>
<td align="center">1</td>
</tr>
</tbody>
</table>
</div></div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">所以，如果我们要合并这些权限，就需要做简单的加法了：将对应的数字相加。</p>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">假如我们要分配读、写权限，那么我们就要用 4+2，就等于 6。数字 6 表示具有读和写权限。</p>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">以下是可能的组合形式：</p>
</div><div class="cl-preview-section"><div class="table-wrapper"><table>
<thead>
<tr>
<th align="center">权限</th>
<th align="center">数字</th>
<th align="center">计算</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">—</td>
<td align="center">0</td>
<td align="center">0 + 0 + 0</td>
</tr>
<tr>
<td align="center">r–</td>
<td align="center">4</td>
<td align="center">4 + 0 + 0</td>
</tr>
<tr>
<td align="center">-w-</td>
<td align="center">2</td>
<td align="center">0 + 2 + 0</td>
</tr>
<tr>
<td align="center">–x</td>
<td align="center">1</td>
<td align="center">0 + 0 + 1</td>
</tr>
<tr>
<td align="center">rw-</td>
<td align="center">6</td>
<td align="center">4 + 2 + 0</td>
</tr>
<tr>
<td align="center">-wx</td>
<td align="center">3</td>
<td align="center">0 + 2 + 1</td>
</tr>
<tr>
<td align="center">r-x</td>
<td align="center">5</td>
<td align="center">4 + 0 + 1</td>
</tr>
<tr>
<td align="center">rwx</td>
<td align="center">7</td>
<td align="center">4 + 2 + 1</td>
</tr>
</tbody>
</table>
</div></div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">不难吧？</p>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">所以，对于访问权限的三组（所有者的权限、群组用户的权限、其他用户的权限），我们只要分别做加法就可以了，然后把三个和连起来。</p>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">例如，640 分别表示：</p>
</div><div class="cl-preview-section"><ul>
<li style="font-size: 20px; line-height: 38px;">文件的所有者有读和写的权限；</li>
<li style="font-size: 20px; line-height: 38px;">文件所在群组的其他用户具有读的权限；</li>
<li style="font-size: 20px; line-height: 38px;">除此之外的其他用户没有任何权限。</li>
</ul>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">因此，我们可以给的最宽泛的权限就是 777：所有者，群组用户，其他用户都有读、写和运行的权限。这样，所有人就都可以对此文件“为所欲为”了。</p>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">相反，如果权限是 000，那么没有人能对此文件做什么。当然，除了 root 之外，root 可以做任何事。</p>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">我们现在来修改 renamed_file 的权限试试：</p>
</div><div class="cl-preview-section"><pre><code>chmod 600 renamed_file

</code></pre>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;"><img src="http://img.mukewang.com/5d108580000139e214000456.png" alt="图片描述" data-original="http://img.mukewang.com/5d108580000139e214000456.png" class="" style="cursor: pointer;"></p>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">可以看到，我们的 renamed_file 文件的访问权限被修改为了：</p>
</div><div class="cl-preview-section"><pre><code>rw-------

</code></pre>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">正好是 600。</p>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">所以现在只有 oscar 可以读和写此文件，其他人都不能做什么。当然，除了 root 之外。</p>
</div><div class="cl-preview-section"><h4 id="用字母来分配权限：chmod-的相对用法" style="font-size: 26px;">用字母来分配权限：chmod 的相对用法</h4>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">除了用数字，我们也可以用另一种方式来分配文件的访问权限：用字母。</p>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">原理是类似的，但是有时用字母的方式更加精巧，因为不需要一次性把三组权限都写出来。</p>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">我们需要知道不同的字母代表什么：</p>
</div><div class="cl-preview-section"><ul>
<li style="font-size: 20px; line-height: 38px;">u：user 的缩写，是英语“用户”的意思。表示所有者；</li>
<li style="font-size: 20px; line-height: 38px;">g：group 的缩写，是英语“群组”的意思。表示群组用户；</li>
<li style="font-size: 20px; line-height: 38px;">o：other 的缩写，是英语“其他”的意思。表示其他用户；</li>
<li style="font-size: 20px; line-height: 38px;">a：all 的缩写，是英语“所有”的意思。表示所有用户。</li>
</ul>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">当然了，和这些字母配合的还有几个符号：</p>
</div><div class="cl-preview-section"><ul>
<li style="font-size: 20px; line-height: 38px;">+：加号，表示添加权限；</li>
<li style="font-size: 20px; line-height: 38px;">-：减号，表示去除权限；</li>
<li style="font-size: 20px; line-height: 38px;">=：等号，表示分配权限。</li>
</ul>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">接下来，我们举例说明如何使用：</p>
</div><div class="cl-preview-section"><pre><code>#文件 file.txt 的所有者增加读和运行的权限。
chmod u+rx file.txt

#文件 file.txt 的群组其他用户增加读的权限。
chmod g+r file.txt 

#文件 file.txt 的其他用户移除读的权限。
chmod o-r file.txt 

#文件 file.txt 的群组其他用户增加读的权限，其他用户移除读的权限。
chmod g+r o-r file.txt 

#文件 file.txt 的群组其他用户和其他用户均移除读的权限。
chmod go-r file.txt 

#文件 file.txt 的所有用户增加运行的权限。
chmod +x file.txt 

#文件 file.txt 的所有者分配读，写和执行的权限；
#群组其他用户分配读的权限，不能写或执行；
#其他用户没有任何权限。
chmod u=rwx,g=r,o=- file.txt 

</code></pre>
</div><div class="cl-preview-section"><h3 id="r-参数：递归地修改访问权限">-R 参数：递归地修改访问权限</h3>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">-R 参数可是“死性不改”，上一课可以配合 cp 命令来递归拷贝文件，这一课又来“捣蛋”：</p>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">chmod 配合 -R 参数可以递归地修改文件访问权限。</p>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">假如我想要只允许 oscar 这个用户能读、写、运行 /home/oscar 这个目录的所有文件（当然，root 不算，root 可以做任何事），该怎么做呢：</p>
</div><div class="cl-preview-section"><pre><code>chmod -R 700 /home/oscar

</code></pre>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">就是这么简单。</p>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">关于权限，大家可以多做练习，来巩固知识点。</p>
</div><div class="cl-preview-section"><div class="summary"><h5 class="centertitle" style="font-size: 20px; line-height: 38px;">小结 </h5></div><!--title:&#23567;&#32467; -->
</div><div class="cl-preview-section"><ol>
<li style="font-size: 20px; line-height: 38px;">有一些命令的运行须要先切换到 root 身份。比如：usermod（用于修改用户账户）、chgrp（用于修改群组）和chown（用于修改所有者和群组）；</li>
<li style="font-size: 20px; line-height: 38px;">chmod 命令不需要 root 身份就可以运行。我们可以用 chmod 命令来修改文件的访问权限。有三种权限：r（读权限）、w（写权限）和 x（运行权限）。</li>
</ol>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">今天的课就到这里，一起加油吧！</p>
</div></div>
            </div>
                            <!-- 买过的阅读 -->
                <div class="art-next-prev clearfix">
                                                                        <!-- 已买且开放 或者可以试读 -->
                            <a href="/read/39/article/468">
                                                    <div class="prev l clearfix">
                                <div class="icon l">
                                    <i class="imv2-arrow3_l"></i>
                                </div>
                                <p>
                                    14 用户和权限，有权就任性。用户管理
                                </p>
                            </div>
                        </a>
                                                                                            <!-- 已买且开放 或者可以试读 -->
                            <a href="/read/39/article/470">
                                                    <div class="next r clearfix">
                                <p>
                                    16 Nano，初学者的文本编辑器
                                </p>
                                <div class="icon r">
                                    <i class="imv2-arrow3_r"></i>
                                </div>

                            </div>
                        </a>
                                    </div>
                    </div>
        <div class="comments-con js-comments-con" id="coments_con">
        </div>



    </div>
    
    
    

</div>
 
<!-- 专栏介绍页专栏评价 -->

<!-- 专栏介绍页底部三条评价 -->

<!-- 专栏阅读页弹层目录和介绍页页面目录 -->

<!-- 专栏阅读页发布回复 -->

<!-- 专栏阅读页发布评论 -->

<!-- 专栏阅读页底部评论 -->

<!-- 专栏阅读 单个 评论 -->

<!-- 新增回复和展开三条以外回复 -->

<!-- 立即订阅的弹窗 -->












</div></body></html>