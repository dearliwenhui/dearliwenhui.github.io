<html><head><meta charset="utf-8"><title>26 进程操作和系统重启-慕课专栏</title>
			<meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
			<meta name="renderer" content="webkit">
			<meta property="qc:admins" content="77103107776157736375">
			<meta property="wb:webmaster" content="c4f857219bfae3cb">
			<meta http-equiv="Access-Control-Allow-Origin" content="*">
			<meta http-equiv="Cache-Control" content="no-transform ">
			<meta http-equiv="Cache-Control" content="no-siteapp">
			<link rel="apple-touch-icon" sizes="76x76" href="https://www.imooc.com/static/img/common/touch-icon-ipad.png">
			<link rel="apple-touch-icon" sizes="120x120" href="https://www.imooc.com/static/img/common/touch-icon-iphone-retina.png">
			<link rel="apple-touch-icon" sizes="152x152" href="https://www.imooc.com/static/img/common/touch-icon-ipad-retina.png">
			<link href="https://moco.imooc.com/captcha/style/captcha.min.css" rel="stylesheet">
			<link rel="stylesheet" href="https://www.imooc.com/static/moco/v1.0/dist/css/moco.min.css?t=201907021539" type="text/css">
			<link rel="stylesheet" href="https://www.imooc.com/static/lib/swiper/swiper-3.4.2.min.css?t=201907021539">
			<link rel="stylesheet" href="https://static.mukewang.com/static/css/??base.css,common/common-less.css?t=2.5,column/zhuanlanChapter-less.css?t=2.5,course/inc/course_tipoff-less.css?t=2.5?v=201907051055" type="text/css">
			<link charset="utf-8" rel="stylesheet" href="https://www.imooc.com/static/lib/ueditor/themes/imooc/css/ueditor.css?v=201907021539"><link rel="stylesheet" href="https://www.imooc.com/static/lib/baiduShare/api/css/share_style0_16.css?v=6aba13f0.css"></head>
			<body><div id="main">

<div class="container clearfix" id="top" style="display: block; width: 1134px;">
    
    <div class="center_con js-center_con l" style="width: 1134px;">
        <div class="article-con">
                            <!-- 买过的阅读 -->
                <div class="map">
                    <a href="/read" target="_blank"><i class="imv2-feather-o"></i></a>
                    <a href="/read/39" target="_blank">Linux命令行与Shell脚本编程大全</a>
                    <a href="" target="_blank">
                        <span>
                            / 3-5 26 进程操作和系统重启
                        </span>
                    </a>
                </div>

            


            <div class="art-title" style="margin-top: 0px;">
                26 进程操作和系统重启
            </div>
            <div class="art-info">
                
                <span>
                    更新时间：2019-07-18 12:00:02
                </span>
            </div>
            <div class="art-top">
                                <img src="https://img4.mukewang.com/5d2c191d0001109e06400359.jpg" alt="">
                                                <div class="famous-word-box">
                    <img src="https://www.imooc.com/static/img/column/bg-l.png" alt="" class="bg1 bg">
                    <img src="https://www.imooc.com/static/img/column/bg-r.png" alt="" class="bg2 bg">
                    <div class="famous-word">合理安排时间，就等于节约时间。<p class="author">——培根</p></div>
                </div>
                            </div>
            <div class="art-content js-lookimg">
                <div><div class="cl-preview-section"><h2 id="内容简介" style="font-size: 30px;">内容简介</h2>
</div><div class="cl-preview-section"><ol>
<li style="font-size: 20px; line-height: 38px;">前言</li>
<li style="font-size: 20px; line-height: 38px;">top：进程的动态列表</li>
<li style="font-size: 20px; line-height: 38px;">Ctrl + C 和 kill 命令：停止进程</li>
<li style="font-size: 20px; line-height: 38px;">halt 命令和 reboot 命令：停止和重启系统</li>
<li style="font-size: 20px; line-height: 38px;">总结</li>
</ol>
</div><div class="cl-preview-section"><h2 id="前言" style="font-size: 30px;">1. 前言</h2>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">上一课监视系统活动和查看进程，滴水不漏，我们介绍了 w 和 ps 两个命令，开启了监视系统活动和操作进程的篇章。</p>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">这一课我们将继续讲解。这一课特别简单，可以说是本系列课程里最轻松的课之一。</p>
</div><div class="cl-preview-section"><h2 id="top：进程的动态列表" style="font-size: 30px;">2. top：进程的动态列表</h2>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">ps 命令虽然强大，但有一个缺陷：是静态的，只能记录当下那一刻的进程列表。</p>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">但事实上，我们的系统是时刻变化的，有些进程这一秒在运行，下一秒可能就被终止了。所以 ps 命令并不能帮助我们实时监控系统的进程。</p>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">怎么才能获取一个随时间一直在变的进程列表呢？就需要用到 top 命令了。</p>
</div><div class="cl-preview-section"><pre><code>top
</code></pre>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;"><img src="http://img.mukewang.com/5d27ec440001034e21501352.png" alt="图片描述" data-original="http://img.mukewang.com/5d27ec440001034e21501352.png" class="" style="cursor: pointer;"></p>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">这个列表是交互性的，而且实时更新。</p>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">第一行，你可以看到当前时间（22:09:21，就是 22 点 09 分 21 秒），系统运行时间（up 38 min，也就是 38 分钟），用户数目（1 user，就是“一个用户”），平均负载（load average: 0.02, 0.01, 0.00）。</p>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">接下来的几行，我们不过多解释了，因为这涉及到操作系统的一些概念。</p>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">在下面，[PID，USER，PR，NI，VIRT，RES，SHR，S，%CPU，%MEM，TIME+，COMMAND] 开始的那个列表就是进程列表了。</p>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">但为什么相比之前 ps -ef 时进程少了这么多呢？</p>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">因为 top 命令无法显示全部的进程。它只显示排在前面的一些进程，为了整个信息区域正好占据终端中一个页面的大小。</p>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">默认的，这些进程是按照使用处理器的比率来排序的，从大到小（按照 %CPU 那一列的数值），最消耗处理器的进程排在最前面。所以如果你觉得自己的系统变慢了，过载了，查看列表中最开始的几个进程是个好主意。</p>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">前面说过了，top 命令输出的信息页面不但是动态变化的，而且是可交互的。</p>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">我们用一些键盘的按键可以控制 top 的显示结果。</p>
</div><div class="cl-preview-section"><ul>
<li style="font-size: 20px; line-height: 38px;">q：退出 top。</li>
<li style="font-size: 20px; line-height: 38px;">h：显示帮助文档，也就是哪些按键可以使用。按下任意键返回，按 q 回到 top 命令的主界面。</li>
<li style="font-size: 20px; line-height: 38px;">B：大写的 B，加粗某些信息。</li>
<li style="font-size: 20px; line-height: 38px;">f：在进程列表中添加或删除某些列。按 q 回到 top 命令的主界面。</li>
<li style="font-size: 20px; line-height: 38px;">F：改变进程列表排序所参照的列。默认情况下，是按照 %CPU 那一列来排序，按 q 回到 top 命令的主界面。</li>
<li style="font-size: 20px; line-height: 38px;">u：依照用户来过滤显示。可以输入用户名，按回车。</li>
<li style="font-size: 20px; line-height: 38px;">k：结束某个进程。会让你输入要结束的进程的 PID。</li>
<li style="font-size: 20px; line-height: 38px;">s：改变刷新页面的时间。默认的，页面每隔 3 秒刷新一次。</li>
</ul>
</div><div class="cl-preview-section"><blockquote>
<p style="font-size: 20px; line-height: 38px;">当然了，Linux 下有很多优秀的软件，做得比 top 和 ps 更好，而且“颜值”也更高。例如：<a href="https://nicolargo.github.io/glances">glances</a>  和 <a href="https://hisham.hm/htop">htop</a>。大家可以安装试试（<code>sudo apt install glances</code> 和 <code>sudo apt install htop</code>），我就安装了 glances 这个软件，htop 也是不错的。</p>
</blockquote>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">运行 glances ：</p>
</div><div class="cl-preview-section"><pre><code>glances
</code></pre>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;"><img src="http://img.mukewang.com/5d27ec4c00010ee421601362.png" alt="图片描述" data-original="http://img.mukewang.com/5d27ec4c00010ee421601362.png" class="" style="cursor: pointer;"></p>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">运行 htop 试试：</p>
</div><div class="cl-preview-section"><pre><code>htop
</code></pre>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;"><img src="http://img.mukewang.com/5d27ec550001c2d121601358.png" alt="图片描述" data-original="http://img.mukewang.com/5d27ec550001c2d121601358.png" class="" style="cursor: pointer;"></p>
</div><div class="cl-preview-section"><h2 id="ctrl--c-和-kill-命令：停止进程" style="font-size: 30px;">3. Ctrl + C 和 kill 命令：停止进程</h2>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">有时候，系统会突然卡住。这在 Linux 中也是会发生的。</p>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">在 Linux 中停止进程有几种方法：</p>
</div><div class="cl-preview-section"><h4 id="ctrl--c：停止终端中正在运行的进程" style="font-size: 26px;">Ctrl + C：停止终端中正在运行的进程</h4>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">Ctrl + C 这个组合快捷键还是需要知道的，因为它可以比较友好地中止终端中正在运行的程序（进程），这个组合键也只在终端中会这样执行，如果在普通的图形界面中，它就是拷贝的快捷键，与 Windows 下无异。</p>
</div><div class="cl-preview-section"><blockquote>
<p style="font-size: 20px; line-height: 38px;">顺便讲一个 Linux 下的小技巧，比如我们在终端下，用鼠标选中一段文字，然后按一下鼠标中间的滚轮，就会在终端里粘贴选中的文字。</p>
</blockquote>
</div><div class="cl-preview-section"><blockquote>
<p style="font-size: 20px; line-height: 38px;">而在终端中拷贝和粘贴，需要用 “Ctrl + Shift + C” 和 “Ctrl + Shift + V” 来执行。</p>
</blockquote>
</div><div class="cl-preview-section"><h4 id="kill-命令：结束一个进程" style="font-size: 26px;">kill 命令：结束一个进程</h4>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">Ctrl + C 这个组合键只能作用于当前终端中正在运行的程序，而 Linux 中，很多进程是你看不到的，在后台运行。</p>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">这时候就需要请出 kill 命令了。</p>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">kill 是英语“杀死”的意思，虽然有点“小暴力”，但是这个命令却很有用。</p>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">kill 命令后接需要结束的进程号，也就是之前我们看到过的 PID。是一个数字，我们可以通过 ps 命令或 top 命令来获知进程的 PID。</p>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">例如：</p>
</div><div class="cl-preview-section"><pre><code>kill 8461
</code></pre>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">我们也可以同时用 kill 来结束好几个进程，只要用空格隔开它们的 PID：</p>
</div><div class="cl-preview-section"><pre><code>kill 8461 8561 1706
</code></pre>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">有时候，kill 命令虽然作用于一个进程，但是它不终止，卡住了（因为 kill 命令会很友善地结束进程）。那怎么办呢？有没有比较简单粗暴的方式呢？</p>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">是有的，我们可以用 kill -9 来立即强制结束进程。比如：</p>
</div><div class="cl-preview-section"><pre><code>kill -9 7291
</code></pre>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">立即结束 PID 是 7291 的进程，非常“野蛮粗暴”。</p>
</div><div class="cl-preview-section"><h4 id="killall：结束多个进程" style="font-size: 26px;">killall：结束多个进程</h4>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">记得我们之前提过，同一个程序运行时可能启动多个进程。如果你想一下子结束所有这些进程，怎么做呢？</p>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">当然，你可以用 kill + PID 的方式一个个地结束这些进程，但是我们有一个更快捷的命令：killall。</p>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">all 是英语“全部”的意思，所以 killall 命令就是用于结束全部要结束的进程。</p>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">不同于 kill 命令，killall 命令后接程序名，而不是 PID（进程号）。</p>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">假设现在我开了好几个图形终端，在每一个中我都运行 find 命令进行文件的查找。</p>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">这样，我用 <code>ps -u oscar | grep find</code> 就可以搜索出好多个 find 的进程。</p>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">如果我要结束所有这些 find 进程，可以这么做：</p>
</div><div class="cl-preview-section"><pre><code>killall find
</code></pre>
</div><div class="cl-preview-section"><h2 id="halt-命令和-reboot-命令：停止和重启系统" style="font-size: 30px;">4. halt 命令和 reboot 命令：停止和重启系统</h2>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">既然我们刚学了如何用 kill 命令来结束进程，那么现在我们该来学习一下如何关闭和重启整个 Linux 系统了吧。</p>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">虽然你肯定已经知道如何用图形界面的操作方式来关闭和重启系统了。但是用命令行，也许你还不知道怎么做吧。</p>
</div><div class="cl-preview-section"><h4 id="halt：关闭系统" style="font-size: 26px;">halt：关闭系统</h4>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">需要以 root 身份才能关闭系统，所以我们可以这么做：</p>
</div><div class="cl-preview-section"><pre><code>sudo halt
</code></pre>
</div><div class="cl-preview-section"><h4 id="reboot：重启系统" style="font-size: 26px;">reboot：重启系统</h4>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">同样地，需要以 root 身份才能重启系统，我们可以这么做：</p>
</div><div class="cl-preview-section"><pre><code>sudo reboot

</code></pre>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">实际上，halt 和 reboot 这两个命令都调用了 Linux 的另一个命令：shutdown</p>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">大家可以阅读 shutdown 命令的手册，也可以自行去网上搜索一下如何用 shutdown 命令来实现定时关机或重启（有很多教程）。</p>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">算是留给大家的小作业了。</p>
</div><div class="cl-preview-section"><blockquote>
<p style="font-size: 20px; line-height: 38px;">其实还有一个命令：poweroff 也可以用于关机，而且非常有效率。直接运行即可关机。</p>
</blockquote>
</div><div class="cl-preview-section"><pre><code>poweroff

</code></pre>
</div><div class="cl-preview-section"><div class="summary"><h5 class="centertitle" style="font-size: 20px; line-height: 38px;">小结 </h5></div><!--title:&#23567;&#32467; -->
</div><div class="cl-preview-section"><ol>
<li style="font-size: 20px; line-height: 38px;">top 命令是动态可交互的，会实时更新页面。</li>
<li style="font-size: 20px; line-height: 38px;">组合键 Ctrl + C 结束当前终端中正在运行的程序。</li>
<li style="font-size: 20px; line-height: 38px;">kill 命令用于结束进程，后接进程的 PID（一个数字）。如果 kill 这个比较友好的结束命令不起作用，进程依旧卡住，那么我们可以使用 kill -9 来强制结束进程。</li>
<li style="font-size: 20px; line-height: 38px;">halt 命令关闭系统，reboot 命令重启系统，poweroff 命令可以实现立即关机。</li>
</ol>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">今天的课就到这里，一起加油吧！</p>
</div></div>
            </div>
                            <!-- 买过的阅读 -->
                <div class="art-next-prev clearfix">
                                                                        <!-- 已买且开放 或者可以试读 -->
                            <a href="/read/39/article/519">
                                                    <div class="prev l clearfix">
                                <div class="icon l">
                                    <i class="imv2-arrow3_l"></i>
                                </div>
                                <p>
                                    25 监视系统活动和查看进程。滴水不漏
                                </p>
                            </div>
                        </a>
                                                                                            <!-- 已买且开放 或者可以试读 -->
                            <a href="/read/39/article/521">
                                                    <div class="next r clearfix">
                                <p>
                                    27 前后台进程，灵活切换
                                </p>
                                <div class="icon r">
                                    <i class="imv2-arrow3_r"></i>
                                </div>

                            </div>
                        </a>
                                    </div>
                    </div>
        <div class="comments-con js-comments-con" id="coments_con">
        </div>



    </div>
    
    
    

</div>
 
<!-- 专栏介绍页专栏评价 -->

<!-- 专栏介绍页底部三条评价 -->

<!-- 专栏阅读页弹层目录和介绍页页面目录 -->

<!-- 专栏阅读页发布回复 -->

<!-- 专栏阅读页发布评论 -->

<!-- 专栏阅读页底部评论 -->

<!-- 专栏阅读 单个 评论 -->

<!-- 新增回复和展开三条以外回复 -->

<!-- 立即订阅的弹窗 -->












</div></body></html>