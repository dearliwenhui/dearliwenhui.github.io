<html><head><meta charset="utf-8"><title>09 学习正则表达式—构造复杂模式-慕课专栏</title>
			<meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
			<meta name="renderer" content="webkit">
			<meta property="qc:admins" content="77103107776157736375">
			<meta property="wb:webmaster" content="c4f857219bfae3cb">
			<meta http-equiv="Access-Control-Allow-Origin" content="*">
			<meta http-equiv="Cache-Control" content="no-transform ">
			<meta http-equiv="Cache-Control" content="no-siteapp">
			<link rel="apple-touch-icon" sizes="76x76" href="https://www.imooc.com/static/img/common/touch-icon-ipad.png">
			<link rel="apple-touch-icon" sizes="120x120" href="https://www.imooc.com/static/img/common/touch-icon-iphone-retina.png">
			<link rel="apple-touch-icon" sizes="152x152" href="https://www.imooc.com/static/img/common/touch-icon-ipad-retina.png">
			<link href="https://moco.imooc.com/captcha/style/captcha.min.css" rel="stylesheet">
			<link rel="stylesheet" href="https://www.imooc.com/static/moco/v1.0/dist/css/moco.min.css?t=201907021539" type="text/css">
			<link rel="stylesheet" href="https://www.imooc.com/static/lib/swiper/swiper-3.4.2.min.css?t=201907021539">
			<link rel="stylesheet" href="https://static.mukewang.com/static/css/??base.css,common/common-less.css?t=2.5,column/zhuanlanChapter-less.css?t=2.5,course/inc/course_tipoff-less.css?t=2.5?v=201907051055" type="text/css">
			<link charset="utf-8" rel="stylesheet" href="https://www.imooc.com/static/lib/ueditor/themes/imooc/css/ueditor.css?v=201907021539"><link rel="stylesheet" href="https://www.imooc.com/static/lib/baiduShare/api/css/share_style0_16.css?v=6aba13f0.css"></head>
			<body><div id="main">

<div class="container clearfix" id="top" style="display: block; width: 1134px;">
    
    <div class="center_con js-center_con l" style="width: 1134px;">
        <div class="article-con">
                            <!-- 买过的阅读 -->
                <div class="map">
                    <a href="/read" target="_blank"><i class="imv2-feather-o"></i></a>
                    <a href="/read/34" target="_blank">从 0 开始学爬虫</a>
                    <a href="" target="_blank">
                        <span>
                            / 3-3 09 学习正则表达式—构造复杂模式
                        </span>
                    </a>
                </div>

            


            <div class="art-title" style="margin-top: 0px;">
                09 学习正则表达式—构造复杂模式
            </div>
            <div class="art-info">
                
                <span>
                    更新时间：2019-06-14 14:34:28
                </span>
            </div>
            <div class="art-top">
                                <img src="https://img2.mukewang.com/5ce2555e0001574006400359.jpg" alt="">
                                                <div class="famous-word-box">
                    <img src="https://www.imooc.com/static/img/column/bg-l.png" alt="" class="bg1 bg">
                    <img src="https://www.imooc.com/static/img/column/bg-r.png" alt="" class="bg2 bg">
                    <div class="famous-word">为中华之崛起而读书。<p class="author">——周恩来</p></div>
                </div>
                            </div>
            <div class="art-content js-lookimg">
                <div><div class="cl-preview-section"><h2 id="定位符定位点" style="font-size: 30px;">定位符(定位点)</h2>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">定位符又称定位点，它使你能够将正则表达式固定到行首或行尾。它们还使您能够创建这样的正则表达式，这些正则表达式出现在一个单词内、在一个单词的开头或者一个单词的结尾。</p>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">定位符用来描述字符串或单词的边界，<code>^</code> 和 <code>$</code> 分别指字符串的开始与结束，<code>\b</code> 描述单词的前或后边界，<code>\B</code> 表示非单词边界。</p>
</div><div class="cl-preview-section"><blockquote>
<p style="font-size: 20px; line-height: 38px;"><strong>定位点（原子零宽度断言）</strong> 指定字符串中必须出现匹配的位置。 在搜索表达式中使用定位点时，正则表达式引擎不在字符串中前进或使用字符，它仅在指定位置查找匹配。 例如， <code>^</code> 指定必须从行或字符串的开头开始匹配。 因此，正则表达式 <code>^http:</code> 仅当 “http:” 出现在行开头时才与之匹配。</p>
</blockquote>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">正则表达式的定位符有：</p>
</div><div class="cl-preview-section"><div class="table-wrapper"><table>
<thead>
<tr>
<th align="center">特殊字符</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center"><code>^</code></td>
<td>匹配输入的开始。如果多行标志被设置为true，那么也匹配换行符后紧跟的位置。例如，<code>/^A/</code> 并不会匹配 <code>"an A"</code> 中的 <code>'A'</code>，但是会匹配 <code>"An E"</code> 中的 <code>'A'</code></td>
</tr>
<tr>
<td align="center"><code>$</code></td>
<td>匹配输入的结束。例如，<code>/t$/</code> 并不会匹配 <code>"eater"</code> 中的 <code>'t'</code>，但是会匹配 <code>"eat"</code> 中的 <code>'t'</code>。</td>
</tr>
<tr>
<td align="center"><code>\A</code></td>
<td>匹配必须出现在输入字符串的开头。等同于<code>^</code></td>
</tr>
<tr>
<td align="center"><code>\B</code></td>
<td>匹配一个非单词边界。他匹配一个前后字符都是相同类型的位置：都是“字”字符或者都不是“字”字符。一个字符串的开始和结尾都被认为不是“字”字符，或者空字符串。</td>
</tr>
<tr>
<td align="center"><code>\b</code></td>
<td>匹配一个词的边界。一个词的边界就是一个词不被另外一个“字”字符跟随的位置或者没有其他“字”字符在其前面的位置。注意，一个匹配的词的边界并不包含在匹配的内容中。换句话说，一个匹配的词的边界的内容的长度是0。（不要和[\b]混淆了）</td>
</tr>
</tbody>
</table>
</div></div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">下面来看几个常用的例子：</p>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;"><code>\ba\w*\b</code> 匹配以字母 <code>a</code> 开头的单词——先是某个单词开始处(<code>\b</code>)，然后是字母a,然后是任意数量的字母或数字(<code>\w*</code>)，最后是单词结束处(<code>\b</code>)。<br>
<img src="http://img.mukewang.com/5cde54ec0001af9618841558.png" alt="图片描述" data-original="http://img.mukewang.com/5cde54ec0001af9618841558.png" class="" style="cursor: pointer;"><code>\b\w{6}\b</code> 匹配刚好 6 个字符的单词。<br>
<img src="http://img.mukewang.com/5cde55070001bee418841558.png" alt="图片描述" data-original="http://img.mukewang.com/5cde55070001bee418841558.png" class="" style="cursor: pointer;">通过这种方式是不是比之前容易理解很多？这是我自己学习正则的一个小窍门，将这种晦涩难懂的语法视觉化来学习一下就能记得住。</p>
</div><div class="cl-preview-section"><blockquote>
<p style="font-size: 20px; line-height: 38px;">注：不能将限定符与定位符一起使用。由于在紧靠换行或者单词边界的前面或后面不能有一个以上位置，因此不允许诸如 ^* 之类的表达式。</p>
</blockquote>
</div><div class="cl-preview-section"><h2 id="重复限定" style="font-size: 30px;">重复限定</h2>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">能够匹配不同的字符集合是正则表达式可以做的第一件事，这对于字符串可用方法来说是不可能的。 但是，如果这是正则表达式的唯一额外功能，那么它们就不会有太大的优势。 另一个功能是你可以指定正则的某些部分必须重复一定次数。</p>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">限定符有以下这些：</p>
</div><div class="cl-preview-section"><div class="table-wrapper"><table>
<thead>
<tr>
<th align="center">特殊字符</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center"><code>*</code></td>
<td>匹配前面的子表达式零次或多次。例如，<code>zo*</code> 能匹配 <code>"z"</code> 以及 <code>"zoo"</code>。<code>*</code> 等价于<code>{0,}</code>。</td>
</tr>
<tr>
<td align="center"><code>+</code></td>
<td>匹配前面的子表达式一次或多次。例如，<code>'zo+'</code> 能匹配 <code>"zo"</code> 以及 <code>"zoo"</code>，但不能匹配 <code>"z"</code>。<code>+</code> 等价于 <code>{1,}</code>。</td>
</tr>
<tr>
<td align="center"><code>?</code></td>
<td>匹配前面的子表达式零次或一次。例如，<code>"do(es)?"</code> 可以匹配 <code>"do"</code> 、 <code>"does"</code> 中的 <code>"does"</code> 、 <code>"doxy"</code> 中的 <code>"do"</code> 。<code>?</code> 等价于 <code>{0,1}</code>。</td>
</tr>
<tr>
<td align="center"><code>{n}</code></td>
<td>n 是一个非负整数。匹配确定的 n 次。例如，<code>'o{2}'</code> 不能匹配 <code>"Bob"</code> 中的 ‘o’，但是能匹配<code>"food"</code> 中的两个 o。</td>
</tr>
<tr>
<td align="center"><code>{n,}</code></td>
<td>n 是一个非负整数。至少匹配n 次。例如，<code>'o{2,}'</code> 不能匹配 <code>"Bob"</code> 中的 <code>'o'</code>，但能匹配 <code>"foooood"</code> 中的所有 o。<code>'o{1,}'</code> 等价于 <code>'o+'</code>。<code>'o{0,}'</code> 则等价于 <code>'o*'</code>。</td>
</tr>
<tr>
<td align="center"><code>{n,m}</code></td>
<td>m 和 n 均为非负整数，其中<code>n &lt;= m</code>。最少匹配 n 次且最多匹配 m 次。例如，<code>"o{1,3}"</code> 将匹配 <code>"fooooood"</code> 中的前三个 o。<code>'o{0,1}'</code> 等价于<code>'o?'</code>。请注意在逗号和两个数之间不能有空格。</td>
</tr>
</tbody>
</table>
</div></div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">通常，限定符是<strong>贪婪</strong>的；它们使正则表达式引擎匹配尽可能多的特定模式实例。 向限定符追加 <code>?</code> 字符可使它成为<strong>惰性</strong>的；会使正则表达式引擎匹配尽可能少的实例。</p>
</div><div class="cl-preview-section"><h4 id="匹配零次或多次：" style="font-size: 26px;">匹配零次或多次：<code>*</code></h4>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;"><code>*</code> 限定符与前面的元素匹配零次或多次。 它相当于 {0,} 量符。 <strong>是贪婪量符，相当于惰性量符是</strong>?。</p>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">下面的示例说明此正则表达式。 在输入字符串中的九个数字中，五个与模式匹配，四个<code>（95、929、9219 和 9919）</code>不匹配。<br>
<img src="http://img.mukewang.com/5cde55460001875321761670.png" alt="图片描述" data-original="http://img.mukewang.com/5cde55460001875321761670.png" class="" style="cursor: pointer;">正则表达式<code>\b91*9*\b</code>模式的定义如下表所示。</p>
</div><div class="cl-preview-section"><div class="table-wrapper"><table>
<thead>
<tr>
<th align="left">模式</th>
<th align="left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>\b</code></td>
<td align="left">在单词边界处开始。</td>
</tr>
<tr>
<td align="left"><code>91*</code></td>
<td align="left">匹配后跟零个或多个“1”字符的“9”。</td>
</tr>
<tr>
<td align="left"><code>9*</code></td>
<td align="left">匹配零个或多个“9”字符。</td>
</tr>
<tr>
<td align="left"><code>\b</code></td>
<td align="left">在字边界结束。</td>
</tr>
</tbody>
</table>
</div></div><div class="cl-preview-section"><h4 id="匹配一次或多次：" style="font-size: 26px;">匹配一次或多次：+</h4>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;"><code>+</code> 量符匹配上一元素一次或多次。 它相当于 <code>{1,}</code>。 <code>+</code> 是贪婪量符，相当的惰性量符是 <code>+?</code>。</p>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">例如，正则表达式 <code>\ban+\w*?\b</code> 会尝试匹配以字母 <code>a</code> 为开头后跟一个或多个字母 <code>n</code> 的完整单词。 正则表达式会匹配单词 <code>an</code>、<code>annual</code>、<code>announcement</code> 和 <code>antique</code>，但无法正确无法匹配 <code>autumn</code> 和 <code>all</code>。<br>
<img src="http://img.mukewang.com/5cde55630001157221761670.png" alt="图片描述" data-original="http://img.mukewang.com/5cde55630001157221761670.png" class="" style="cursor: pointer;">正则表达式模式的定义如下表所示：</p>
</div><div class="cl-preview-section"><div class="table-wrapper"><table>
<thead>
<tr>
<th align="left">模式</th>
<th align="left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>\b</code></td>
<td align="left">在单词边界处开始。</td>
</tr>
<tr>
<td align="left"><code>an+</code></td>
<td align="left">匹配后跟一个或多个“n”字符的“a”。</td>
</tr>
<tr>
<td align="left"><code>\w*?</code></td>
<td align="left">匹配单词字符出现零次或多次，但次数尽可能少。</td>
</tr>
<tr>
<td align="left"><code>\b</code></td>
<td align="left">在字边界结束。</td>
</tr>
</tbody>
</table>
</div></div><div class="cl-preview-section"><h4 id="匹配零次或一次：" style="font-size: 26px;">匹配零次或一次：?</h4>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;"><code>?</code> 量符匹配上一元素零次或一次。 它相当于 <code>{0,1}</code>。 <code>?</code> 是贪婪量符，相当的惰性量符是 <code>??</code>。</p>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">例如，正则表达式 <code>\ban?\b</code> 会尝试匹配以字母 <code>a</code> 为开头后跟零个或一个字母 <code>n</code> 的完整单词。 换句话说，它会尝试匹配单词 <code>a</code> 和 <code>an</code>。 下面的示例说明此正则表达式。<br>
<img src="http://img.mukewang.com/5cde559a0001fb6221761670.png" alt="图片描述" data-original="http://img.mukewang.com/5cde559a0001fb6221761670.png" class="" style="cursor: pointer;">正则表达式模式的定义如下表所示。</p>
</div><div class="cl-preview-section"><div class="table-wrapper"><table>
<thead>
<tr>
<th align="left">模式</th>
<th align="left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>\b</code></td>
<td align="left">在单词边界处开始。</td>
</tr>
<tr>
<td align="left"><code>an?</code></td>
<td align="left">匹配后跟零个或一个“n”字符的“a”。</td>
</tr>
<tr>
<td align="left"><code>\b</code></td>
<td align="left">在字边界结束。</td>
</tr>
</tbody>
</table>
</div></div><div class="cl-preview-section"><h4 id="恰好匹配-n-次：n" style="font-size: 26px;">恰好匹配 n 次：{n}</h4>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;"><code>{</code>n<code>}</code> 限定符与前面的元素恰好匹配 n 次，其中 n 是任何整数。 <code>{</code>n<code>}</code> 是贪婪限定符，其惰性等效项是 <code>{</code>n<code>}?</code>。</p>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">例如，正则表达式 <code>\b\d+\,\d{3}\b</code> 会尝试匹配依次后跟一个或多个十进制数字、三个十进制数字、一个单词边界的单词边界。 下面的示例说明此正则表达式。<br>
<img src="http://img.mukewang.com/5cde55c10001530121761670.png" alt="图片描述" data-original="http://img.mukewang.com/5cde55c10001530121761670.png" class="" style="cursor: pointer;">正则表达式模式的定义如下表所示。</p>
</div><div class="cl-preview-section"><div class="table-wrapper"><table>
<thead>
<tr>
<th align="left">模式</th>
<th align="left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>\b</code></td>
<td align="left">在单词边界处开始。</td>
</tr>
<tr>
<td align="left"><code>\d+</code></td>
<td align="left">匹配一个或多个十进制数字。</td>
</tr>
<tr>
<td align="left"><code>\,</code></td>
<td align="left">匹配逗号字符。</td>
</tr>
<tr>
<td align="left"><code>\d{3}</code></td>
<td align="left">匹配三个十进制数字。</td>
</tr>
<tr>
<td align="left"><code>\b</code></td>
<td align="left">在字边界结束。</td>
</tr>
</tbody>
</table>
</div></div><div class="cl-preview-section"><h4 id="至少匹配-n-次：n" style="font-size: 26px;">至少匹配 n 次：{n,}</h4>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;"><code>{</code>n<code>,}</code> 限定符与前面的元素至少匹配 n 次，其中 n 是任何整数。 <code>{</code>n<code>,}</code> 是贪婪限定符，其惰性等效项是 <code>{</code>n<code>,}?</code>。</p>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">例如，正则表达式 <code>\b\d{2,}\b\D+</code> 会尝试匹配依次后跟至少两个数字、一个单词边界和一个非数字字符的单词边界。 下面的示例说明此正则表达式。 正则表达式无法匹配短语 <code>"7 days"</code>，因为它只包含一个十进制数字，但可以成功匹配短语 <code>"10 weeks and 300 years"</code>。<br>
<img src="http://img.mukewang.com/5cde55ec00018a5e21761670.png" alt="图片描述" data-original="http://img.mukewang.com/5cde55ec00018a5e21761670.png" class="" style="cursor: pointer;">正则表达式模式的定义如下表所示。</p>
</div><div class="cl-preview-section"><div class="table-wrapper"><table>
<thead>
<tr>
<th align="left">模式</th>
<th align="left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>\b</code></td>
<td align="left">在单词边界处开始。</td>
</tr>
<tr>
<td align="left"><code>\d{2,}</code></td>
<td align="left">匹配至少两个十进制数字。</td>
</tr>
<tr>
<td align="left"><code>\b</code></td>
<td align="left">与字边界匹配。</td>
</tr>
<tr>
<td align="left"><code>\D+</code></td>
<td align="left">匹配至少一个非十进制数字。</td>
</tr>
</tbody>
</table>
</div></div><div class="cl-preview-section"><h4 id="匹配-n-到-m-次：nm" style="font-size: 26px;">匹配 n 到 m 次：{n,m}</h4>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;"><code>{n,m}</code> 限定符与前面的元素至少匹配 n 次，但不超过 m 次，其中 n 和 m 是整数。 <code>{n,m}</code> 是贪婪限定符，相当的惰性限定符是 <code>{n,m}?</code>。</p>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">在下面的示例中，正则表达式 <code>(00\s){2,4}</code> 尝试与后跟一个空格的两个零数字匹配两到四次。 请注意，输入字符串的最后一部分包含此模式五次，而不是最大值四次。 但是，只有此子字符串的初始部分（到空格和第五对零）与正则表达式模式匹配。<br>
<img src="http://img.mukewang.com/5cde56100001866f21761670.png" alt="图片描述" data-original="http://img.mukewang.com/5cde56100001866f21761670.png" class="" style="cursor: pointer;">## 分组构造</p>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">分组构造描述了正则表达式的子表达式，用于捕获输入字符串的子字符串。</p>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">用圆括号将所有选择项括起来，相邻的选择项之间用<code>|</code>分隔。但用圆括号会有一个副作用，会使相关的匹配被缓存，此时可用<code>?:</code>放在第一个选项前来消除这种副作用。</p>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">其中<code>?:</code>是非捕获元之一，还有两个非捕获元是<code>?=</code>和<code>?!</code>。这两个非捕获元还有更多的含义，前者为正向预查，在任何开始匹配圆括号内的正则表达式模式的位置来匹配搜索字符串；后者为负向预查，在任何开始不匹配该正则表达式模式的位置来匹配搜索字符串。</p>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">以下分组构造捕获匹配的子表达式：</p>
</div><div class="cl-preview-section"><pre><code>(` *子表达式* `)
</code></pre>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">其中 <strong>子表达式</strong> 为任何有效正则表达式模式。 使用括号的捕获按正则表达式中左括号的顺序从一开始从左到右自动编号。 捕获元素编号为零的捕获是由整个正则表达式模式匹配的文本。</p>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">以下为几种分组构造模式：</p>
</div><div class="cl-preview-section"><div class="table-wrapper"><table>
<thead>
<tr>
<th>(<em>pattern</em>)</th>
<th>匹配 <em>pattern</em> 并获取这一匹配。所获取的匹配可以从产生的 Matches 集合得到。</th>
</tr>
</thead>
<tbody>
<tr>
<td>(?:<em>pattern</em>)</td>
<td>匹配 <em>pattern</em> 但不获取匹配结果，也就是说这是一个非获取匹配，不进行存储供以后使用。这在使用 “或” 字符 (|) 来组合一个模式的各个部分是很有用。例如， 'industr(?:y|ies) 就是一个比 ‘industry|industries’ 更简略的表达式。</td>
</tr>
<tr>
<td>(?=<em>pattern</em>)</td>
<td>正向预查，在任何匹配 <em>pattern</em> 的字符串开始处匹配查找字符串。这是一个非获取匹配，也就是说，该匹配不需要获取供以后使用。例如，‘Windows (?=95|98|NT|2000)’ 能匹配 “Windows 2000” 中的 “Windows” ，但不能匹配 “Windows 3.1” 中的 “Windows”。预查不消耗字符，也就是说，在一个匹配发生后，在最后一次匹配之后立即开始下一次匹配的搜索，而不是从包含预查的字符之后开始。</td>
</tr>
<tr>
<td>(?!<em>pattern</em>)</td>
<td>负向预查，在任何不匹配 <em>pattern</em> 的字符串开始处匹配查找字符串。这是一个非获取匹配，也就是说，该匹配不需要获取供以后使用。例如’Windows (?!95|98|NT|2000)’ 能匹配 “Windows 3.1” 中的 “Windows”，但不能匹配 “Windows 2000” 中的 “Windows”。预查不消耗字符，也就是说，在一个匹配发生后，在最后一次匹配之后立即开始下一次匹配的搜索，而不是从包含预查的字符之后开始</td>
</tr>
</tbody>
</table>
</div></div><div class="cl-preview-section"><h4 id="反向引用构造" style="font-size: 26px;">反向引用构造</h4>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">为一个正则表达式模式或部分模式两边添加圆括号将导致相关匹配存储到一个临时缓冲区中，所捕获的每个子匹配都按照在正则表达式模式中从左到右出现的顺序存储。缓冲区编号从<code>1</code>开始，最多可存储<code>99</code>个捕获的子表达式。每个缓冲区都可以使用<code>\n</code>访问，其中<code>n</code>标识特定缓冲区的一位或两位十进制数。</p>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">可以使用非捕获元字符<code>?:</code>、<code>?=</code>或<code>?!</code>来重写捕获，忽略对相关匹配的保存。</p>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">反向引用可以查找文本中两个相同的相邻单词的匹配项。以下面的句子为例：</p>
</div><div class="cl-preview-section"><pre><code>Is is the cost of of gasoline going up up?
</code></pre>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">上面的句子很显然有多个重复的单词。如果能设计一种方法定位该句子，而不必查找每个单词的重复出现，那该有多好。下面的正则表达式使用单个子表达式来实现这一点：<br>
<img src="http://img.mukewang.com/5cde563700013e5e21761670.png" alt="图片描述" data-original="http://img.mukewang.com/5cde563700013e5e21761670.png" class="" style="cursor: pointer;">捕获的表达式，正如 <strong>[a-z]+</strong> 指定的，包括一个或多个字母。正则表达式的第二部分是对以前捕获的子匹配项的引用，即，单词的第二个匹配项正好由括号表达式匹配。<strong>\1</strong> 指定第一个子匹配项。</p>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">单词边界元字符确保只检测整个单词。否则，诸如 “is issued” 或 “this is” 之类的词组将不能正确地被此表达式识别。</p>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">正则表达式后面的全局标记 <strong>g</strong> 指定将该表达式应用到输入字符串中能够查找到的尽可能多的匹配。</p>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">表达式的结尾处的不区分大小写 <strong>i</strong> 标记指定不区分大小写。</p>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">多行标记指定换行符的两边可能出现潜在的匹配。</p>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">反向引用还可以将通用资源指示符 (URI) 分解为其组件。假定您想将下面的 URI 分解为协议（ftp、http 等等）、域地址和页/路径：</p>
</div><div class="cl-preview-section"><pre><code>https://tech.163.com/19/0426/17/EDN3H0SN00097U7S.html
</code></pre>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">可以设计正则表达式如下：</p>
</div><div class="cl-preview-section"><pre><code>(\w+):\/\/([^/:d]+)(:\d*)?([^#]*)
</code></pre>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;"><img src="http://img.mukewang.com/5cde56640001bebd21761670.png" alt="图片描述" data-original="http://img.mukewang.com/5cde56640001bebd21761670.png" class="" style="cursor: pointer;">- 第一个括号中的子表达式捕获 Web 地址的协议部分。该子表达式匹配在冒号和两个正斜杠前面的任何单词。</p>
</div><div class="cl-preview-section"><ul>
<li style="font-size: 20px; line-height: 38px;">第二个括号中的子表达式捕获地址的域地址部分。子表达式匹配 <strong>:</strong> 和 <strong>/</strong> 之后的一个或多个字符。</li>
<li style="font-size: 20px; line-height: 38px;">第三个括号中的子表达式捕获端口号（如果指定了的话）。该子表达式匹配冒号后面的零个或多个数字。只能重复一次该子表达式。</li>
<li style="font-size: 20px; line-height: 38px;">第四个括号中的子表达式捕获 Web 地址指定的路径和 / 或页信息。该子表达式能匹配不包括 # 或空格字符的任何字符序列。</li>
</ul>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">将正则表达式应用到上面的 URI，各子匹配项包含下面的内容：</p>
</div><div class="cl-preview-section"><ul>
<li style="font-size: 20px; line-height: 38px;">第一个括号子表达式包含 <strong>https</strong></li>
<li style="font-size: 20px; line-height: 38px;">第二个括号子表达式包含 <strong><a href="http://tech.163.com">tech.163.com</a></strong></li>
<li style="font-size: 20px; line-height: 38px;">第三个括号子表达式包含 <strong>None</strong> (无没成功捕获，此处只捕获端口)</li>
<li style="font-size: 20px; line-height: 38px;">第四个括号子表达式包含 <strong>/19/0426/17/EDN3H0SN00097U7S.html</strong></li>
</ul>
</div><div class="cl-preview-section"><h2 id="小结" style="font-size: 30px;">小结</h2>
</div><div class="cl-preview-section"><p style="font-size: 20px; line-height: 38px;">想必你也在这节课中看到了正则表达式对于处理匹配文字的强大之处了，正则表达式是繁琐的，但它是强大的，学会之后的应用会让你除了提高效率外，会给你带来绝对的成就感。至此，我们已经对正则表达式的使用有了一个最基本的认识，在以后的使用过程中你一定会渐渐的感觉到正则在爬虫中所起到的不可替代的作用。<br>
<img src="http://img.mukewang.com/5cef897d00010f5e16000412.jpg" alt="图片描述" data-original="http://img.mukewang.com/5cef897d00010f5e16000412.jpg" class="" style="cursor: pointer;"></p>
</div></div>
            </div>
                            <!-- 买过的阅读 -->
                <div class="art-next-prev clearfix">
                                                                        <!-- 已买且开放 或者可以试读 -->
                            <a href="/read/34/article/310">
                                                    <div class="prev l clearfix">
                                <div class="icon l">
                                    <i class="imv2-arrow3_l"></i>
                                </div>
                                <p>
                                    08 学习正则表达式—基础入门
                                </p>
                            </div>
                        </a>
                                                                                            <!-- 已买且开放 或者可以试读 -->
                            <a href="/read/34/article/312">
                                                    <div class="next r clearfix">
                                <p>
                                    10 Python中的正则表达式用法
                                </p>
                                <div class="icon r">
                                    <i class="imv2-arrow3_r"></i>
                                </div>

                            </div>
                        </a>
                                    </div>
                    </div>
        <div class="comments-con js-comments-con" id="coments_con">     <div class="number">精选留言 <span class="js-number">1</span></div>     <div class="comments">         <div class="input-fake js-showcommentModal">             欢迎在这里发表留言，作者筛选后可公开显示         </div>                      <ul class="comments-list js-comments-list">                                                        <li class="comment clearfix">                                          <a href="//www.imooc.com/u/6831119/articles" target="_blank">                             <div class="head-img l" style="background-image:url(//img4.mukewang.com/545847490001582602200220-100-100.jpg)"></div>                         </a>                         <div class="comment-detail l">                             <div class="hoverDisplay">                                 <div class="com-author clearfix">                                                                                                               <a href="//www.imooc.com/u/6831119/articles" target="_blank">                                         <div class="name l">慕九州0095486</div>                                     </a>                                                                                                                                                                                              </div>                                 <div class="com-content">                                     那个99为什么也匹配，不是91开头的吗？您这里能不能回复一下                                 </div>                                 <div class="com-other clearfix">                                                                              <!-- 没点过赞 -->                                         <div class="btn-agree js-agree l" data-commentid="603">                                                                                  <i class="imv2-thumb_up"></i>                                             <span>0</span>                                         </div>                                                                                                               <div class="btn-reply l js-reply" data-replyid="603">回复</div>                                     <!-- 没登录不显示举报 -->                                                                              <div class="btn-report l js-tip-off comment-report" data-id="603" data-uid="6831119" data-src="/read/34/article/311" data-type="15">举报</div>                                                                          <div class="time r">2019-06-23</div>                                 </div>                             </div>                                                              <ul class="replys-list js-replys-list">                                                                              <li class="reply clearfix">                                             <a href="//www.imooc.com/u/7655886/articles" target="_blank">                                                 <div class="head-img l" style="background-image:url(//img.mukewang.com/5b8cd78d00017c2302000200-100-100.jpg)"></div>                                             </a>                                             <div class="reply-detail l">                                                 <div class="rep-author clearfix">                                                                                                          <a href="//www.imooc.com/u/7655886/articles" target="_blank">                                                         <div class="name l">DongHj</div>                                                     </a>                                                                                                                                                                   <div class="to l clearfix">                                                             <span class="l">回复</span>                                                                                                                          <a href="//www.imooc.com/u/6831119/articles" target="_blank">                                                                 <div class="name l">慕九州0095486</div>                                                             </a>                                                         </div>                                                                                                      </div>                                                 <div class="rep-content">                                                     同学你好，之所以会匹配 99 是因为“9*”会匹配零个或多个“9”字符哦。同时这个正则表达式也不是91开头哦                                                 </div>                                                 <div class="rep-other clearfix">                                                     <div class="btn-reply l js-reply" data-replyid="438" data-name="DongHj">回复</div>                                                                                                              <div class="btn-report l js-tip-off reply-report" data-id="438" data-uid="7655886" data-src="/read/34/article/311" data-type="16">举报</div>                                                                                                          <div class="time r">2019-06-25 10:49:31</div>                                                 </div>                                             </div>                                         </li>                                                                      </ul>                                                                                   </div>                     </li>                              </ul>                           </div>  </div>



    </div>
    
    
    

</div>
 
<!-- 专栏介绍页专栏评价 -->

<!-- 专栏介绍页底部三条评价 -->

<!-- 专栏阅读页弹层目录和介绍页页面目录 -->

<!-- 专栏阅读页发布回复 -->

<!-- 专栏阅读页发布评论 -->

<!-- 专栏阅读页底部评论 -->

<!-- 专栏阅读 单个 评论 -->

<!-- 新增回复和展开三条以外回复 -->

<!-- 立即订阅的弹窗 -->












</div></body></html>